<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>You&Ra Center ë‚˜ëŠ” ì–´ë–¤ ê°ê° ìœ í˜•ì¼ê¹Œ?</title>
<style>
 :root{--bg:#faf7f2;--card:#ffffff;--ink:#1f2421;--muted:#6b6b6b;--brand:#1c4e80;--line:#ececec}
 *{box-sizing:border-box}
 body{margin:0;padding:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,"Apple SD Gothic Neo","Malgun Gothic",sans-serif}
 .wrap{max-width:900px;margin:28px auto;padding:0 16px}
 .card{background:var(--card);border-radius:16px;box-shadow:0 6px 20px rgba(0,0,0,.06);padding:18px 16px;margin-bottom:16px}
 header.card{display:flex;gap:16px;align-items:center}
 h1{margin:0 0 4px}
 .brand-text{font-weight:800;color:var(--brand);font-size:20px;letter-spacing:.2px}
 .muted{color:var(--muted)}
 .controls{display:flex;gap:10px;align-items:center}
 .sound-btn{border:1px solid #cfd8e3;background:#fff;border-radius:10px;padding:8px 12px;cursor:pointer;font-size:18px}
 .q-area{min-height:120px;display:flex;align-items:center;justify-content:center;text-align:center;font-size:18px;padding:10px}
 .likert{display:flex;gap:8px;justify-content:center;flex-wrap:wrap}
 .likert button{border:1px solid #cfd8e3;background:#f6f8fb;border-radius:12px;padding:12px 14px;cursor:pointer;font-weight:700;min-width:110px;line-height:1.2}
 .likert button span{display:block;font-size:.85em;font-weight:600;margin-top:2px;color:#555}
 .likert button.active{background:var(--brand);color:#fff;border-color:var(--brand)}
 .nav{display:flex;gap:8px;margin-top:12px}
 .nav button{flex:1;border:none;background:var(--brand);color:#fff;border-radius:10px;padding:12px;font-weight:700;cursor:pointer}
 .nav button.secondary{background:#eaeaea;color:#1f1f1f}
 .progress{height:8px;background:#f0f3f5;border-radius:999px;overflow:hidden;margin-top:8px}
 .bar{height:8px;background:linear-gradient(90deg,#1c74d8,#00b2a9);width:0%}
 .result{background:var(--card);border-left:6px solid var(--brand);padding:14px;border-radius:10px;margin-top:12px}
 .result-card{display:flex;gap:14px;align-items:flex-start;flex-wrap:wrap;margin-top:12px}
 .small{font-size:12px;color:var(--muted)}
 .hrow{display:flex;align-items:center;gap:10px;margin:8px 0}
 .hrow .label{width:70px;font-weight:600}
 .hbar{flex:1;height:10px;background:#f0f3f5;border-radius:999px;overflow:hidden}
 .fill{height:100%;background:linear-gradient(90deg,#1c74d8,#00b2a9);width:0%}
 .pct{width:48px;text-align:right;font-variant-numeric:tabular-nums}
 .reason{margin:8px 0 0 0;padding-left:18px}
 .reason li{margin:4px 0}
</style>
</head>
<body>
<div class="wrap">
  <header class="card">
    <div class="brand-text">You&Ra</div>
    <div>
      <h1>ë‚˜ëŠ” ì–´ë–¤ ê°ê° ìœ í˜•ì¼ê¹Œ?</h1>
      <div class="muted">ì´ 30ë¬¸í•­ Â· 5ì  ì²™ë„(1 ì „í˜€ ì•„ë‹˜ ~ 5 ë§¤ìš° ê·¸ëŸ¼).</div>
      <div class="controls">
        <button id="ttsBtn" type="button" class="sound-btn" title="ì½ì–´ì£¼ê¸°" aria-label="ì½ì–´ì£¼ê¸°">ğŸ”Š</button>
      </div>
    </div>
  </header>

  <div id="exam" class="card">
    <div class="q-area" id="qText">ë¡œë”© ì¤‘â€¦</div>
    <div class="likert" id="likert" role="radiogroup" aria-label="ì‘ë‹µ ì„ íƒ"></div>
    <div class="nav">
      <button id="prevBtn" class="secondary">ì´ì „</button>
      <button id="nextBtn">ë‹¤ìŒ</button>
    </div>
    <div style="display:flex;justify-content:space-between;margin-top:8px;">
      <div class="small" id="counter">0 / 30</div>
    </div>
    <div class="progress"><div class="bar" id="bar"></div></div>
  </div>

  <div id="out" class="result" style="display:none"></div>

  <div class="card" style="display:flex;gap:8px;flex-wrap:wrap">
    <button id="restart" class="secondary">ì²˜ìŒë¶€í„° ë‹¤ì‹œ</button>
    <button id="exportBtn" class="secondary">CSV ë‚´ë³´ë‚´ê¸°</button>
  </div>
</div>

<script>
(function(){
  // ì‰¬ìš´ ë¬¸ì¥ë§Œ ì‚¬ìš© (ì—­ë¬¸í•­: 6,12,18,24,30)
  const ITEMS = [
    ["1","ì£¼ë³€ì´ ì§€ì €ë¶„í•˜ë©´ ì •ë¦¬í•˜ê¸° ì „ì—” ì¼ì´ ì˜ ì•ˆ ëœë‹¤.","A",false],
    ["2","ê¸€ìì™€ ë°°ê²½ì´ ë¹„ìŠ·í•œ í™”ë©´ì„ ì˜¤ë˜ ë³´ë©´ ëˆˆì´ ë¹¨ë¦¬ í”¼ê³¤í•˜ë‹¤.","A",false],
    ["3","ì¡°ëª… ë°ê¸°ê°€ ë°”ë€Œë©´ ê¸ˆë°© ì ì‘í•˜ê¸° ì–´ë µë‹¤.","A",false],
    ["4","ê³µê°„ ìƒ‰ì´ ë‹¬ë¼ì§€ë©´ ì¼ ì†ë„ë‚˜ ì‹¤ìˆ˜ê°€ ë‹¬ë¼ì§„ë‹¤.","A",false],
    ["5","ë°ì€ ë¹›ì„ ì˜¤ë˜ ë³´ë©´ ê·¸ ë’¤ì— ë©í•˜ê±°ë‚˜ ë‘í†µì´ ì˜¨ë‹¤.","A",false],
    ["6","ì£¼ë³€ì´ ì§€ì €ë¶„í•´ë„ í•´ì•¼ í•  ì¼ë§Œ ë³´ë©´ ê´œì°®ë‹¤.","A",true],
    ["7","ì—¬ëŸ¬ ì‚¬ëŒì´ ë™ì‹œì— ë§í•˜ë©´ ëŒ€í™” ë‚´ìš©ì„ ë†“ì¹˜ê¸° ì‰½ë‹¤.","B",false],
    ["8","ì‹œë„ëŸ¬ìš°ë©´ ì§‘ì¤‘ì´ ì˜ ì•ˆ ëœë‹¤.","B",false],
    ["9","ë°˜ë³µë˜ëŠ” ì†Œë¦¬ê°€ ê³„ì† ë“¤ë¦¬ë©´ ëª¸ì´ ê¸´ì¥ëœë‹¤.","B",false],
    ["10","ì‚¬ëŒ ë§ì€ ê³³ì€ ì†Œë¦¬ ë•Œë¬¸ì— ê¸ˆë°© ì§€ì¹œë‹¤.","B",false],
    ["11","ëª…ë ¹ì¡° ê°™ì€ ë§íˆ¬ì— ë¨¼ì € ë°˜ì‘í•œë‹¤.","B",false],
    ["12","ì¼ì— ëª°ì…í•˜ë©´ ì£¼ë³€ ì†ŒìŒì´ ì‹ ê²½ ì“°ì´ì§€ ì•ŠëŠ”ë‹¤.","B",true],
    ["13","ì˜· ë¼ë²¨ì´ë‚˜ ì‹œê³„ì¤„ì´ ê±°ìŠ¬ë ¤ ì˜¤ë˜ ëª» í•œë‹¤.","C",false],
    ["14","í™˜ê²½(ì˜¨ë„Â·ìŠµë„)ì´ ë°”ë€Œë©´ ê¸°ë¶„ì´ ë¨¼ì € í”ë“¤ë¦°ë‹¤.","C",false],
    ["15","ë‚¯ì„  ì‚¬ëŒì´ íˆ­ ê±´ë“œë¦¬ë©´ ëª¸ì´ ë¨¼ì € ì›€ì°”í•œë‹¤.","C",false],
    ["16","ê¸´ì¥í•˜ë©´ ì–´ê¹¨ë‚˜ í„± ë“± ëª¸ì´ ë»£ë»£í•´ì§„ë‹¤.","C",false],
    ["17","ë¶€ë“œëŸ¬ìš´ ì´‰ê°ì„ ì ê¹ ë§Œì ¸ë„ í¸ì•ˆí•´ì§„ë‹¤.","C",false],
    ["18","ì˜·ê°ì´ë‚˜ ì¹¨êµ¬ì˜ ì¬ì§ˆì€ ë³„ë¡œ ì‹ ê²½ ì“°ì§€ ì•ŠëŠ”ë‹¤.","C",true],
    ["19","ëƒ„ìƒˆ ë³€í™”ë¥¼ ë‚¨ë“¤ë³´ë‹¤ ë¹¨ë¦¬ ì•Œì•„ì°¨ë¦°ë‹¤.","D",false],
    ["20","ë‚¯ì„  ëƒ„ìƒˆê°€ ë‚˜ë©´ ì–´ë””ì„œ ë‚˜ëŠ”ì§€ ì°¾ëŠë¼ ì§‘ì¤‘ì´ ííŠ¸ëŸ¬ì§„ë‹¤.","D",false],
    ["21","ëƒ„ìƒˆê°€ ì‚¬ë¼ì ¸ë„ ê·¸ ëŠë‚Œì´ í•œë™ì•ˆ ë‚¨ëŠ”ë‹¤.","D",false],
    ["22","ìµìˆ™í•œ ëƒ„ìƒˆë¥¼ ë§¡ìœ¼ë©´ ìƒí™©ê³¼ ìƒê´€ì—†ì´ ì•ˆì‹¬ì´ ëœë‹¤.","D",false],
    ["23","ë¹„ìŠ·í•œ í–¥ë„ ì„¸ê¸°ë‚˜ ì”í–¥ ì°¨ì´ë¥¼ ì˜ êµ¬ë¶„í•œë‹¤.","D",false],
    ["24","ëƒ„ìƒˆê°€ ê°•í•´ì ¸ë„ ì¼í•˜ëŠ” ë° ê±°ì˜ ì˜í–¥ì´ ì—†ë‹¤.","D",true],
    ["25","ì‹ì‚¬ ì‹œê°„ì´ ííŠ¸ëŸ¬ì§€ë©´ ì§‘ì¤‘ì´ ë¨¼ì € ë–¨ì–´ì§„ë‹¤.","E",false],
    ["26","ìŠ¤íŠ¸ë ˆìŠ¤ ë°›ìœ¼ë©´ ë§¤ìš´ë§›Â·ì§ ë§›Â·ë‹¨ë§› ê°™ì€ ìŒì‹ì„ ìì£¼ ì°¾ëŠ”ë‹¤.","E",false],
    ["27","ì‹ì‚¬ë¥¼ ê±°ë¥´ë©´ ì˜ˆë¯¼í•´ì§„ë‹¤.","E",false],
    ["28","ê¸°ëŒ€í•œ ë§›ì´ ì•„ë‹ˆë©´ ë‹¤ë¥¸ ë©”ë‰´ë¡œ ë°”ê¾¸ê±°ë‚˜ ë¨¹ëŠ” ê±¸ ë©ˆì¶˜ë‹¤.","E",false],
    ["29","ìƒˆë¡œìš´ ë§›ì€ ì˜ ì•ˆ ë¨¹ìœ¼ë ¤ í•œë‹¤.","E",false],
    ["30","ì‹ì‚¬ ì‹œê°„ì´ë‚˜ ë©”ë‰´ê°€ ë‹¬ë¼ë„ ê¸°ë¶„ì€ í° ë³€í™”ê°€ ì—†ë‹¤.","E",true]
  ];

  // ê²°ê³¼ ì¹´ë“œ í…ìŠ¤íŠ¸(â€˜ë‹¹ì‹ ì€ â€¦â€™ í†¤)
  const TEXTS = {
    A:{title:"ì‹œê°í˜•",
       feature:["ë‹¹ì‹ ì€ ì‹œê° ìê·¹ì— ë¯¼ê°í•´ìš”.","ë‹¹ì‹ ì€ ì •ëˆëœ êµ¬ì¡°ì™€ ì°¨ë¶„í•œ ìƒ‰ì—ì„œ ì•ˆì •ê°ì„ ëŠê»´ìš”."],
       routine:["ì •ë¦¬Â·ì •ëˆ","ë¬´ì±„ìƒ‰ í™˜ê²½","ìì—°ê´‘ ë…ì„œ/ëª…ìƒ","ì»¬ëŸ¬ ë§Œë‹¤ë¼"],
       desc:"ë¹›ì˜ ì„¸ê¸°Â·ëŒ€ë¹„Â·ìƒ‰ê°Â·ì‹œê°ì  í˜¼ì¡ì— ë°˜ì‘ì´ ë¹ ë¥¸ í¸ì…ë‹ˆë‹¤. ì •ëˆëœ ì‹œì•¼ì™€ ë¶€ë“œëŸ¬ìš´ ìƒ‰ì¡°ì—ì„œ ì§‘ì¤‘ê³¼ íšŒë³µì´ ì˜ ì¼ì–´ë‚©ë‹ˆë‹¤."},
    B:{title:"ì²­ê°í˜•",
       feature:["ë‹¹ì‹ ì€ ì†Œë¦¬ì˜ í¬ê¸°Â·í†¤Â·ê²¹ì¹¨ì— ë¯¼ê°í•´ìš”.","ë‹¹ì‹ ì€ ì§€ì†ë˜ëŠ” ì†ŒìŒì—ì„œ ì—ë„ˆì§€ê°€ ë¹¨ë¦¬ ì†Œëª¨ë¼ìš”."],
       routine:["ë°±ìƒ‰ì†ŒìŒ","í”Œë ˆì´ë¦¬ìŠ¤íŠ¸","ì¡°ìš©í•œ ì‹œê°„","ìê¸° í™•ì–¸ ë§í•˜ê¸°(ì†Œë¦¬ì™€ í•¨ê»˜ ëª…ìƒ ë„ì›€)"],
       desc:"ê²¹ì¹˜ëŠ” ë§ì†Œë¦¬, êµ°ì¤‘ ì†ŒìŒ, íŠ¹ì • ì–µì–‘ì— ë¯¼ê°í•©ë‹ˆë‹¤. ì˜ˆì¸¡ ê°€ëŠ¥í•œ ì†Œë¦¬ í™˜ê²½ê³¼ â€˜ì¡°ìš©í•œ êµ¬ê°„â€™ì´ í¼í¬ë¨¼ìŠ¤ì— ë„ì›€ë©ë‹ˆë‹¤."},
    C:{title:"ì´‰ê°í˜•",
       feature:["ë‹¹ì‹ ì€ ì´‰ê°ê³¼ ì••ë°•ê°ì— ë¯¼ê°í•´ìš”.","ë‹¹ì‹ ì€ ë¶€ë“œëŸ½ê³  ë”°ëœ»í•œ ì´‰ê°ì—ì„œ í¸ì•ˆí•¨ì„ ëŠê»´ìš”."],
       routine:["ì† ê³µì˜ˆ","ë‹´ìš”Â·ë”°ëœ»í•œ ë¬¼ê±´","ìŠ¤íŠ¸ë ˆì¹­+ë§ˆì‚¬ì§€","ê°ì • ì¼ê¸°"],
       desc:"í”¼ë¶€ ì••ë°•Â·ì˜¨ìŠµë„ ë³€í™”Â·ìŠ¤í‚¨ì‹­ì— ì‹ ì²´ ë°˜ì‘ì´ ë¨¼ì € ë‚˜íƒ€ë‚©ë‹ˆë‹¤. ë¶€ë“œëŸ¬ìš´ ì„¬ìœ Â·ë”°ëœ»í•¨Â·ê°€ë²¼ìš´ ì••ë°•ì´ ì´ì™„ì— íš¨ê³¼ì ì…ë‹ˆë‹¤."},
    D:{title:"í›„ê°í˜•",
       feature:["ë‹¹ì‹ ì€ í–¥ì˜ ë³€í™”ì— ë¹ ë¥´ê²Œ ë°˜ì‘í•´ìš”.","ë‹¹ì‹ ì€ ìµìˆ™í•œ í–¥ì—ì„œ ì•ˆì •ì„, ê³¼í•œ í–¥ì—ì„œ í”¼ë¡œë¥¼ ëŠë‚„ ìˆ˜ ìˆì–´ìš”."],
       routine:["í–¥ì´ˆÂ·ì•„ë¡œë§ˆ","í–¥ê¸° ë…¸íŠ¸","ìì—° í–¥ ë§¡ê¸°","ì°½ì‘ í™œë™"],
       desc:"ëƒ„ìƒˆ ë³€í™”ë¥¼ ê°€ì¥ ë¨¼ì € í¬ì°©í•˜ê³  ê°ì • ì—¬ì§„ì´ ë‚¨ê¸° ì‰½ìŠµë‹ˆë‹¤. ìµìˆ™í•œ í–¥ì€ ì•ˆì •ì„, ê³¼í•œ í–¥ì€ ì§‘ì¤‘ ì €í•˜ë¥¼ ìœ ë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."},
    E:{title:"ë¯¸ê°í˜•",
       feature:["ë‹¹ì‹ ì€ ë°°ê³ í””ê³¼ ë§› ê²½í—˜ì´ ê¸°ë¶„ì— í° ì˜í–¥ì„ ì¤˜ìš”.","ë‹¹ì‹ ì€ ê·œì¹™ì ì¸ ì‹ì‚¬ì™€ ë”°ëœ»í•œ ìŒë£Œì—ì„œ ì‰½ê²Œ ì•ˆì •ë¼ìš”."],
       routine:["ê°ì • ìŒì‹ ê¸°ë¡","ì‹ì‚¬=íšŒë³µ ë£¨í‹´","ë”°ëœ»í•œ ìŒë£Œ"],
       desc:"ì‹ì‚¬ ê·œì¹™Â·ë§› ê¸°ëŒ€ì™€ ì‹¤ì œ ê²½í—˜ì˜ ì°¨ì´ê°€ ì •ì„œì— ì˜í–¥ì„ ì¤ë‹ˆë‹¤. ìŠ¤íŠ¸ë ˆìŠ¤ ìƒí™©ì—ì„œëŠ” íŠ¹ì • ë§›ì„ ë” ì°¾ì„ ìˆ˜ ìˆì–´ìš”."}
  };

  let order=[], idx=0, answers={};

  function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}

  function newRun(){
    order = shuffle([...ITEMS]); // ë‚´ìš©ì€ ë¬´ì‘ìœ„, í™”ë©´ ë²ˆí˜¸ëŠ” 1â†’30
    idx = 0; answers = {};
    document.getElementById("out").style.display="none";
    render();
  }

  function render(){
    const it = order[idx]; if(!it) return;
    document.getElementById("qText").innerText = (idx+1) + "ë²ˆ. " + it[1];

    const labels = {1:"ì „í˜€ ì•„ë‹˜",2:"ê·¸ë ‡ì§€ ì•ŠìŒ",3:"ë³´í†µ",4:"ê·¸ëŸ° í¸",5:"ë§¤ìš° ê·¸ëŸ¼"};
    const likert = document.getElementById("likert");
    likert.innerHTML = "";
    for(let v=1; v<=5; v++){
      const b=document.createElement("button");
      b.setAttribute("role","radio");
      b.setAttribute("aria-checked", answers[it[0]]===v ? "true":"false");
      b.innerHTML = `${v}<span>${labels[v]}</span>`;
      if(answers[it[0]]===v) b.classList.add("active");
      b.onclick=()=>{answers[it[0]]=v; render();};
      likert.appendChild(b);
    }

    document.getElementById("counter").innerText=(idx+1)+" / "+ITEMS.length;
    document.getElementById("bar").style.width=((idx+1)/ITEMS.length*100)+"%";
    // ì²´í¬ë°•ìŠ¤ ì œê±°ì— ë”°ë¼ ê¸°ë³¸ì ìœ¼ë¡œ 'ê±´ë„ˆë›°ê¸° í—ˆìš©'
    document.getElementById("nextBtn").disabled = false;
  }

  function calc(){
    const scores={A:0,B:0,C:0,D:0,E:0}, counts={A:0,B:0,C:0,D:0,E:0};
    for(const it of ITEMS){
      let v = answers[it[0]] ?? 3;     // ë¬´ì‘ë‹µ 3ì 
      if(it[3]) v = 6 - v;             // ì—­ì±„ì 
      scores[it[2]] += v; counts[it[2]]++;
    }
    const perc={};
    ["A","B","C","D","E"].forEach(k=>{
      const max = (counts[k]||0)*5 || 1;
      perc[k] = Math.round((scores[k]/max)*100);
    });
    return {scores, perc};
  }

  function show(){
    const {scores, perc} = calc();
    const out = document.getElementById("out");
    const max = Math.max(...Object.values(scores));
    const tops = Object.entries(scores).filter(([_,v])=>v===max).map(([k])=>k);
    let html = "";

    html += `<div style="margin-bottom:6px;"><b>ëŒ€í‘œ ê°ê°</b>: ${tops.map(t=>TEXTS[t].title).join(", ")}</div>`;
    html += `<div style="margin-top:8px;margin-bottom:6px;font-weight:700">ê°ê°ë³„ ë¹„ìœ¨</div>`;
    ["A","B","C","D","E"].forEach(k=>{
      html += `
        <div class="hrow">
          <div class="label">${TEXTS[k].title}</div>
          <div class="hbar"><div class="fill" style="width:${perc[k]}%"></div></div>
          <div class="pct">${perc[k]}%</div>
        </div>`;
    });

    // ëŒ€í‘œ ê°ê° ìƒì„¸(íŠ¹ì§•/ë£¨í‹´/ì´ìœ )
    tops.forEach(t=>{
      const contrib = ITEMS.filter(it=>it[2]===t).map(it=>{
        let v = answers[it[0]] ?? 3; if(it[3]) v = 6 - v;
        return {id:it[0], text: it[1], v};
      }).sort((a,b)=>b.v-a.v);
      const topReasons = (contrib.filter(c=>c.v>=4).slice(0,3).length>0)
        ? contrib.filter(c=>c.v>=4).slice(0,3) : contrib.slice(0,3);

      html += `
        <div class="result-card">
          <div>
            <h3 style="margin:0 0 6px">${TEXTS[t].title}</h3>
            <p><b>íŠ¹ì§•:</b> ${TEXTS[t].feature.join(" Â· ")}</p>
            <p><b>íšŒë³µ ë£¨í‹´:</b></p>
            <ul style="margin:6px 0 10px 18px"><li>${TEXTS[t].routine.join("</li><li>")}</li></ul>
            <p style="margin:8px 0 4px"><b>ì´ìœ (ì‘ë‹µ ê·¼ê±°):</b></p>
            <ul class="reason">
              ${topReasons.map(r=>`<li>${r.text} <span class="small">(ì‘ë‹µ ì ìˆ˜: ${r.v})</span></li>`).join("")}
            </ul>
            <p class="small" style="margin-top:8px;color:#666">${TEXTS[t].desc}</p>
          </div>
        </div>`;
    });

    out.innerHTML = html;
    out.style.display = "block";
  }

  function exportCSV(){
    const {scores, perc} = calc();
    const perItem = [];
    for(let n=1; n<=30; n++){ perItem.push(answers[String(n)] ?? 3); }
    const header = "time,A,B,C,D,E,Apct,Bpct,Cpct,Dpct,Epct," + Array.from({length:30},(_,i)=>`Q${i+1}`).join(",");
    const row = [new Date().toISOString(), scores.A,scores.B,scores.C,scores.D,scores.E, perc.A,perc.B,perc.C,perc.D,perc.E, ...perItem].join(",");
    const csv = header + "\n" + row + "\n";
    const blob=new Blob([csv],{type:"text/csv"});
    const a=document.createElement("a");
    a.href=URL.createObjectURL(blob);
    a.download="youandra_sense_results.csv";
    a.click();
    URL.revokeObjectURL(a.href);
  }

  // ì´ë²¤íŠ¸
  document.getElementById("nextBtn").onclick=()=>{ if(idx<order.length-1){idx++;render();}else{show();} };
  document.getElementById("prevBtn").onclick=()=>{ if(idx>0){idx--;render();} };
  document.getElementById("restart").onclick=()=>{ if(confirm("ì§„í–‰ ì¤‘ì¸ ì‘ë‹µì„ ì´ˆê¸°í™”í•˜ê³  ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í• ê¹Œìš”?")) newRun(); };
  document.getElementById("exportBtn").onclick=exportCSV;

  // ì†Œë¦¬ ì•„ì´ì½˜ í´ë¦­ ì‹œ ì½ì–´ì£¼ê¸°
  document.getElementById("ttsBtn").addEventListener("click", ()=>{
    try{
      const it = order[idx];
      const text = (idx+1) + "ë²ˆ. " + it[1];
      window.speechSynthesis.cancel();
      const u = new SpeechSynthesisUtterance(text);
      u.lang = "ko-KR";
      window.speechSynthesis.speak(u);
    }catch(e){ alert("ì´ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ìŒì„± ì½ê¸° ì§€ì›ì´ ì œí•œë  ìˆ˜ ìˆì–´ìš”."); }
  });

  newRun();
})();
</script>
</body>
</html>

